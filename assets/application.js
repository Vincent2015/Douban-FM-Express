// Generated by CoffeeScript 1.7.1
(function() {
  var AUTH_URL, Application, CHANNELS_URL, PLAYLIST_URL, apiHost, player;

  plyr.setup({});

  player = document.querySelectorAll(".player")[0].plyr;

  player.play();

  $(".player-volume").on("input", function(e) {
    var max, min, val;
    min = e.target.min;
    max = e.target.max;
    val = e.target.value;
    return $(e.target).css({
      "backgroundSize": (val - min) * 100 / (max - min) + "% 100%"
    });
  }).trigger('input');

  $(".controls .icon.play").click(function() {
    return player.play();
  });

  $(".controls .icon.pause").click(function() {
    return player.pause();
  });

  apiHost = "http://www.douban.com";

  apiHost = "http://localhost:8080";

  CHANNELS_URL = apiHost + "/j/app/radio/channels";

  AUTH_URL = apiHost + "/j/app/login";

  PLAYLIST_URL = apiHost + "/j/app/radio/people";

  Application = Application = (function() {
    function Application() {}

    Application.prototype.fetchChannels = function() {
      return $.ajax(CHANNELS_URL);
    };

    Application.prototype.login = function(email, password) {
      var app_name, defer, self, version;
      self = this;
      defer = new Q.defer();
      app_name = "radio_desktop_win";
      version = 100;
      if (!email || !password) {
        return false;
      }
      return $.post(AUTH_URL, {
        app_name: app_name,
        version: version,
        email: email,
        password: password
      }).done(function(result) {
        console.log(result);
        if (result.r) {
          return defer.reject(result.err);
        } else {
          self.setToken();
          return defer.resolve(result);
        }
      });
    };

    return Application;

  })();

  new Application().login("houshoushuai@gmail.com", "houshuai");

}).call(this);
